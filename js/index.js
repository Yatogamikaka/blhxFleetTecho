var file = {
    "cvBackFill": [
        {
            "name": "长岛",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "兰利",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "约克城",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "胡蜂",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "独角兽",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "光荣",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "飞鹰",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "隼鹰",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "凤翔",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "祥凤",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "龙骧",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "苍龙",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 2
            }
        },
        {
            "name": "独立",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "巴丹",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "卡萨布兰卡",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "千代田",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "普林斯顿",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "威悉",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": true,
                "point": 1
            }
        },
        {
            "name": "天鹰",
            "unlock": {
                "isLightOnly": false,
                "point": 1
            },
            "completed": {
                "isLightOnly": false,
                "point": 0
            }
        },
        {
            "name": "易北",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": true,
                "point": 1
            }
        },
        {
            "name": "镇海",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        }
    ],
    "cvHit": [
        {
            "name": "大黄蜂",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "皇家方舟",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 2
            }
        },
        {
            "name": "飞龙",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 2
            }
        },
        {
            "name": "半人马",
            "unlock": {
                "isLightOnly": false,
                "point": 2
            },
            "completed": {
                "isLightOnly": false,
                "point": 0
            }
        },
        {
            "name": "龙凤",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "葛城",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 2
            }
        },
        {
            "name": "奥古斯特·冯·帕塞瓦尔",
            "unlock": {
                "isLightOnly": false,
                "point": 1
            },
            "completed": {
                "isLightOnly": false,
                "point": 0
            }
        }
    ],
    "bbBackFill": [
        {
            "name": "内华达",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": " 俄克拉荷马",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "宾夕法尼亚",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "田纳西",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "加利福尼亚",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "约克公爵",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 2
            }
        },
        {
            "name": "扶桑",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "山城",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "伊势",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "日向",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "加富尔伯爵",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "加斯科涅",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 2
            }
        }
    ],
    "bbHit": [
        {
            "name": "伊丽莎白女王",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "厌战",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "三笠",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "马萨诸塞",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 2
            }
        },
        {
            "name": "朱利奥·凯撒",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "英勇",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "佐治亚",
            "unlock": {
                "isLightOnly": false,
                "point": 1
            },
            "completed": {
                "isLightOnly": false,
                "point": 0
            }
        },
        {
            "name": "奥丁",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 1
            }
        },
        {
            "name": "香槟",
            "unlock": {
                "isLightOnly": false,
                "point": 0
            },
            "completed": {
                "isLightOnly": false,
                "point": 2
            }
        }
    ]
}
// console.log(fileName.length);
var i = 0;
for (var o in file) {
    // console.log(file[o], i);
    upDateTable(file[o], i++);
}
// upDateTable() 将json 转换为html表格
function upDateTable(fileName, index) {
    var tbody = document.getElementsByTagName('tbody')[index];
    for (var i = 0; i < fileName.length; i++) {
        var tr = document.createElement('tr');
        tbody.appendChild(tr);
        var flag = 0;
        for (var k in fileName[i]) {
            // console.log(fileName[i][k]);
            var td = document.createElement('td');
            tr.appendChild(td);
            if (fileName[i][k] instanceof Object) {
                td.innerHTML = fileName[i][k].point;
                var TrTitle = fileName[i][k].isLightOnly ? '轻航限定' : '';
                tr.setAttribute('title', TrTitle);
                // console.log(fileName[i][k].isLightOnly);
                fileName[i][k].isLightOnly && (bg(td));
                // if (fileName[i][k].isLightOnly) {
                //     tr.style.backgroundColor = 'skyblue';
                // }
            } else {
                td.innerHTML = fileName[i][k];
            }
            // 最后一栏打勾另外处理
            flag++;
            if (flag % 3 == 0) {
                var td = document.createElement('td');
                // if (fileName[i]["checked"] == true) {
                //     td.innerHTML = '<input type="checkbox" checked = "checked">';
                // } else {
                //     td.innerHTML = '<input type="checkbox">';
                // }
                td.innerHTML = '<input type="checkbox" class="cbox">';
                tr.appendChild(td);
                break;
            }
        }
    }
}

// var btn = document.getElementById('uploadFiles');
// btn.addEventListener('change', handleJson, false);
function handleJson() {
    var uploadFile = document.getElementById('uploadFiles').files[0];
    // console.log('文件：' + uploadFile.name);
    var reader = new FileReader();
    reader.readAsText(uploadFile);

    reader.onload = function () {
        let json = JSON.parse(this.result);
        var i = 0;
        for (var k in json) {
            upDateTable(json[k], i++);
        }
    };
}
// 优化json结构，优化轻航、正航的装填显示

function bg(node) {
    node.style.backgroundColor = 'skyblue';
    // console.log(node.previousElementSibling);
    // console.log(node.previousElementSibling.previousElementSibling);
    node.previousElementSibling.style.backgroundColor = 'skyblue';
    node.previousElementSibling.previousElementSibling.style.backgroundColor = 'skyblue';
}